<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calcular Metragem de Bobina</title>
  <link rel="stylesheet" href="/src/styles/style.css">
</head>
<body>
    <div class="container">
        <h1>Cálculo da metragem através do peso</h1>
        <label for="pesoDesejado">Peso Desejado (kg):</label>
        <input type="number" id="pesoDesejado" placeholder="Digite o peso desejado">
      
        <label for="tipoBobina">Tipo de Bobina:</label>
        <select id="tipoBobina">
          <option value="bopp20">BOPP 20µ</option>
          <option value="bopp17">BOPP 17µ</option>
          <option value="pet12">PET 12µ</option>
          <option value="pp">Polipropileno (PP)</option>
          <option value="pe">Polietileno (PE)</option>
        </select>
      
        <label for="largura">Largura da Bobina (mm):</label>
        <input type="number" id="largura" placeholder="Digite a largura da bobina">
      
        <button onclick="calcularMetragem()">Calcular Metragem</button>
      
        <div id="resultadoMetragem" class="result"></div> 

    <a href="index.html" class="button-back">Voltar</a>
  </div>

  <script>
      function calcularMetragemParaPeso(pesoDesejadoKg, tipoBobina, larguraBobinaMm) {
    let densidade = 0;
    
    // Definir densidades com base no tipo da bobina
    if (tipoBobina === 'bopp20' || tipoBobina === 'bopp17') {
      densidade = 0.905;
    } else if (tipoBobina === 'pet12') {
      densidade = 1.4;
    } else if (tipoBobina === 'pp') {
      densidade = 0.9;  // Densidade aproximada do Polipropileno (PP)
    } else if (tipoBobina === 'pe') {
      densidade = 0.94; // Densidade aproximada do Polietileno (PE)
    } else {
      return -1;  // Retorna -1 se o tipo de bobina não for válido
    }
    
    let larguraBobinaCm = larguraBobinaMm / 10;
    let metragem = 1;
    let peso = densidade * larguraBobinaCm * metragem * 0.0001;
    
    // Loop para encontrar a metragem necessária
    while (peso < pesoDesejadoKg) {
      metragem++;
      peso = densidade * larguraBobinaCm * metragem * 0.0001;
    }
    
    return metragem / 2;
  }

  function calcularMetragem() {
    // Obter os valores do formulário
    let pesoDesejadoKg = parseFloat(document.getElementById('pesoDesejado').value);
    let tipoBobina = document.getElementById('tipoBobina').value;
    let larguraBobinaMm = parseFloat(document.getElementById('largura').value);

    // Validação dos valores
    if (isNaN(pesoDesejadoKg) || pesoDesejadoKg <= 0) {
      alert('Por favor, digite um valor válido para o peso desejado (em kg).');
      return;
    }
    
    if (isNaN(larguraBobinaMm) || larguraBobinaMm <= 0) {
      alert('Por favor, digite um valor válido para a largura da bobina (em milímetros).');
      return;
    }

    // Calcular metragem necessária
    let metragemNecessaria = calcularMetragemParaPeso(pesoDesejadoKg, tipoBobina, larguraBobinaMm);
    
    // Verificar se o tipo de bobina é inválido
    if (metragemNecessaria === -1) {
      alert('Selecione um tipo de bobina válido.');
      return;
    }

    // Exibir o resultado
    let resultadoElement = document.getElementById('resultadoMetragem');
    resultadoElement.innerText = 'Para obter ' + pesoDesejadoKg + ' kg, são necessários ' + metragemNecessaria.toFixed(0) + ' metros de bobina.';
    
    // Tornar o resultado visível
    resultadoElement.style.display = 'block';
  }

  </script>
</body>
</html>
